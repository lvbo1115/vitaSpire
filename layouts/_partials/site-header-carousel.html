{{ $slides := slice
  (dict "image" "/images/biomedical-health-materials.jpg" "title" "Biomedical & Health Materials" "desc" "Revolutionary biomaterials transforming healthcare" "color" "indigo")
  (dict "image" "/images/human-nutrition-solutions.jpg" "title" "Human Nutrition Solutions" "desc" "Scientifically-backed nutritional ingredients for optimal health" "color" "emerald")
  (dict "image" "/images/advanced-industrial-materials.jpg" "title" "Advanced Industrial Materials" "desc" "High-performance materials for aerospace, automotive, and energy" "color" "red")
}}

<div class="carousel-container" id="carousel">
  {{ range $index, $slide := $slides }}
  <div class="carousel-item {{ if eq $index 0 }}active{{ end }}" data-slide="{{ $index }}">
    <img src="{{ $slide.image }}" alt="{{ $slide.title }}" class="w-full h-full object-cover">
    <div class="carousel-overlay">
      <div class="max-w-2xl">
        <span class="inline-block bg-{{ $slide.color }}-600 text-white px-3 py-1 rounded-full text-sm font-medium mb-3">
          {{ $slide.title }}
        </span>
        <h2 class="text-3xl md:text-4xl font-bold mb-2 text-white">{{ $slide.title }}</h2>
        <p class="text-gray-200 text-lg">{{ $slide.desc }}</p>
      </div>
    </div>
  </div>
  {{ end }}

  <!-- Arrows -->
  <button onclick="prevSlide()" class="absolute left-6 top-1/2 transform -translate-y-1/2 bg-white/90 hover:bg-white text-gray-800 rounded-full p-3 shadow-lg transition-all duration-300 hover:scale-110 z-10">
    <i class="fas fa-chevron-left text-xl"></i>
  </button>
  <button onclick="nextSlide()" class="absolute right-6 top-1/2 transform -translate-y-1/2 bg-white/90 hover:bg-white text-gray-800 rounded-full p-3 shadow-lg transition-all duration-300 hover:scale-110 z-10">
    <i class="fas fa-chevron-right text-xl"></i>
  </button>

  <!-- Indicators -->
  <div class="absolute bottom-6 left-1/2 transform -translate-x-1/2 flex space-x-3 z-10">
    {{ range $index, $ := $slides }}
    <button onclick="goToSlide({{ $index }})" id="indicator-{{ $index }}" class="w-3 h-3 rounded-full {{ if eq $index 0 }}bg-white{{ else }}bg-white/50{{ end }} transition-all duration-300"></button>
    {{ end }}
  </div>
</div>

<script>
let currentSlide = 0;
const totalSlides = {{ len $slides }};
let autoSlideInterval;

function showSlide(slideIndex) {
  document.querySelectorAll('.carousel-item').forEach(item => item.classList.remove('active'));
  const target = document.querySelector(`[data-slide="${slideIndex}"]`);
  if (target) target.classList.add('active');

  document.querySelectorAll('[id^="indicator-"]').forEach((indicator, index) => {
    indicator.className = index === slideIndex
      ? 'w-3 h-3 rounded-full bg-white transition-all duration-300'
      : 'w-3 h-3 rounded-full bg-white/50 hover:bg-white/75 transition-all duration-300';
  });
  currentSlide = slideIndex;
}

function nextSlide() { currentSlide = (currentSlide + 1) % totalSlides; showSlide(currentSlide); }
function prevSlide() { currentSlide = (currentSlide - 1 + totalSlides) % totalSlides; showSlide(currentSlide); }
function goToSlide(i) { showSlide(i); }

function startAutoSlide() { autoSlideInterval = setInterval(nextSlide, 6000); }
function stopAutoSlide() { clearInterval(autoSlideInterval); }

document.addEventListener('DOMContentLoaded', () => {
  showSlide(currentSlide);
  startAutoSlide();
  const carousel = document.getElementById('carousel');
  if (carousel) {
    carousel.addEventListener('mouseenter', stopAutoSlide);
    carousel.addEventListener('mouseleave', startAutoSlide);
  }
});
</script>